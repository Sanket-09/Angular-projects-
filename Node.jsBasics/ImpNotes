## Nodejs is SINGLE THREADED, EVENT DRIVEN and NON BLOCKING

## REPL

Read the user input
Evaluate the user input
Print the user input
Loop - return and wait for the new input

'\_' 'underscore' is a special variable which stores the result of the previous operation/expression

when a code is executed line by line in a single thread , then it is know as synchronous application
fs.readFileSync is synchronous

synchronous code are blocking code

Just because a function is taking a callback function in its argument, it doesnt make that function as asynchronous

## BRIEF OVERVIEW OF HOW THE WEB WORKS

Send a request with the address of the server
Server will respond with the data asked for
AKA Client Server architecture

DNS - Domain name server
Special server acting like phone book dictionary of the internet
DOMAIN NAME IS NOT THE REAL ADDRESS OF THE WEB application
DNS stores the list of domain names and their IP address

TCP - Transfer control protocol
Communication protocol of how the data moves on the internet
TCP/IP Connection is made

The request we send to a server is HTTP

Request has request headers
it has various meta data information
Depending of the type of request, we send body accordingly

## HTTP vs HTTPS

HTTPS is secured using TSL/SSL

The webpage will now be sent using HTTP response from the server
We dont have how a HTTP Request will look like but we do have the access to how the response
would look like

The server will send back an html file,
so when we receive the html page then that html will be scanned for its resources
such as css file , assets, js file
then the browser will make multiple request to use the associated required files

## TCP/IP

Defines how data travels acorss the web
TCP converts the data into packets,
reassembles the data upon reaching its address

## HOW REQ/RES works

Types of URl
Files based URL
Resource based URL - we use request handlers
We create request handlers using routing

fallback routes for non required ending point of routes

In nodejs we cannot directly use static files ( Eg - static assets , script files , css , assets images etc)

## SETTING UP RESPONSE HEADERS

200 is the default status code
if we do not specify which status code we want on a certain event then it will 200 by default
You should always set the status code before the response.end() method.

response.writeHead(<status-code> , <Response>)

eg- should be in key:value pair

response.writeHead(200, {
'Content-Type' : 'text/html',
'my-header' : ' hellow world '
});

you can also create your own custom header

## WORKING WITH JSON DATA

JSON DATA vs JS DATA

In json data, the key in key value pair are enclosed in double inverted comma

JSON.parse()
takes in JSON data as parameter and returns JS Object

## PARSING QUERY STRING FROM URL

import the URL Package

url has a method called parse
url.parse() has a second parameter of boolean type
if the boolean is set as true then it will parse the query strings as well

let x = url.parse(request.url , true)

this will return a url object having a query and pathname property
so how to get them ?
The ans is object destructuring syntax

The variable name which we speicify inside the destructuring syntax should be exactly same as property required

eg - the property we need are query and pathname then the object destructuring would look like

let{query, pathname} = url.parse(request.url, true)

## CREATING CUSTOM MODULES

Modules are used to make the funcitons more modular
multiple files would then be able to use the same function in their scope

## EVENT DRIVEN ARCHITECTURE

Event Emitter --> Event Listener --> Event Handler

const server = http.createServer(); // this is event emitter

server.listen(8000, ()=>{
console.log("This is event listener")
})

server.on('request' , (req,res)=>{
console.log("this callback function is the event handler")
})

## THE SERVER OBJECT INHERITS ALL THE EVENT EMITTING AND LISTENING LOGIC FROM THE EVENT EMITTER CLASS

## EMITTING AND HANDLING CUSTOM EVENTS

Event emitters can emit named events

## UNDERSTANDING STREAMS IN NODE.JS

How does fs.readFile and fs.writeFile work?

In fs.readFile the data is read from the source
then it is stored in a readBuffer until all the data is copied into it
and then the data is read by fs.readFile

Similarly in the fs.writeFile, a write buffer is created

IN ABOVE CASE
THE PROBLEM IS IF WE READ A LARGE FILE and IF IT IS COMPLETELY READ THEN IT WILL BE STORED IN THE
SYSTEM MEMORY

## fs.readStream in this the read buffer will be there but a stream will be created where we could read the data piece by piece, unlike fs.readFile which read the whole data all at once

Eg - Netflix , Youtube , aka buffering is stringStream

Streaming makes the data processing more efficient in terms of memory
it has advantage in terms of performance and time as well

## THERE ARE FOUR DIFFERENT TYPES OF STREAM

## READABLE

streams from where we can read or consume data chunk by chunk, eg - reading from filesystem
streams are instance of event emitter class
in readAble streams, we can emit and listen to many events including

DATA EVENT - emitted when there is a new new chunk of data is read and ready to use
END DATA - emitted when there is no more data to consume

## WRITABLE

streams to which we can write data
eg - httpResponse

DRAIN EVENT - when the writable stream internal buffer is empty
FINISH EVENT - after calling of the end method when all data is flushed into the hidden system

## DUPLEX

Both readable and writable at the same time
there are less common
eg - web socket

## TRANSFORM

Are duplex streams but can modify the data when it is being read or written

## Functions to use on a stream

PIPE - helps to plugs stream together , using pipe we can read and write at the same time
READ - when we want to read each chunk from the readble stream one after other

## BACK-PRESSURE

HAppens response cannot send the data as fast as it is receiving the data
solve it using pipe method

## Pipe method is only available on readable streams, this fixes back-pressure

Pipe method fixes the problem of back-pressure
Makes the code more modular
for pipe method there should be a readable source , in that pipe method we need to pass a writable destination i.e. writable stream, duplex stream, transform stream

## NPM

NPM is a command line interface as well as a repository from which you can install open source packages

## TYPES OF PACKAGES

Regualar dependency - If the working of our application / code we are writing depends
Dev dependency - Helps us in the development process , eg code formatter , auto saver etc

## ARCHITECTURE OF NODEJS RUNTIME
